#!/bin/bash

# ููุงุด ูพุงู ุดุฑูุน
echo "๐ ุฏุฑ ุญุงู ุจุฑูุฒุฑุณุงู ุฑุจุงุช ุงุฒ GitHub..."

# ุชุบุฑ ูุณุฑ ุจู ุฏุงุฑฺฉุชูุฑ ูพุฑูฺู
cd /root/tas || { echo "โ ุฎุทุง: ุฏุงุฑฺฉุชูุฑ ูพุฑูฺู ุงูุช ูุดุฏ!"; exit 1; }

# ุฏุฑุงูุช ุขุฎุฑู ุชุบุฑุงุช ุงุฒ GitHub
git pull origin main || { echo "โ ุฎุทุง: ุฏุฑุงูุช ุชุบุฑุงุช ุงุฒ GitHub ูุงูููู ุจูุฏ!"; exit 1; }

# ูุนุงูโุณุงุฒ ูุญุท ูุฌุงุฒ ู ูุตุจ ูพุดโูุงุฒูุง
source venv/bin/activate
pip install -r requirements.txt
deactivate

# ุฑโุงุณุชุงุฑุช ฺฉุฑุฏู ุณุฑูุณ ุฑุจุงุช
echo "๐ ุฑโุงุณุชุงุฑุช ฺฉุฑุฏู ุฑุจุงุช..."
sudo systemctl restart tasbot || { echo "โ ุฎุทุง: ุฑุจุงุช ุฑโุงุณุชุงุฑุช ูุดุฏ!"; exit 1; }

# ุจุฑุฑุณ ูุถุนุช ุฑุจุงุช
sudo systemctl status tasbot --no-pager

echo "โ ุจุฑูุฒุฑุณุงู ุฑุจุงุช ุจุง ููููุช ุงูุฌุงู ุดุฏ!"
